{
  "nodes": [
    {
      "parameters": {
        "jsCode": "// Summary of processing results\nconst workflowData = $getWorkflowStaticData('global');\nconst processedCount = workflowData.processedCount || 0;\nconst newProcessedCount = processedCount + ($input.all().length || 0);\n\n// Update static data\nworkflowData.processedCount = newProcessedCount;\nworkflowData.lastProcessedAt = new Date().toISOString();\n\nreturn [{\n  json: {\n    message: `Batch processing completed successfully`,\n    totalProcessed: newProcessedCount,\n    currentBatchSize: $input.all().length || 0,\n    lastProcessedAt: workflowData.lastProcessedAt,\n    workflowStatus: 'completed'\n  }\n}];"
      },
      "id": "6547dbe2-0796-4c18-a2e6-1b1c10580e29",
      "name": "Processing Complete",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -624,
        32
      ]
    },
    {
      "parameters": {
        "content": "# The alrounder assistant\n- eliminates copy-pasting",
        "height": 176,
        "width": 544,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -592,
        -96
      ],
      "typeVersion": 1,
      "id": "820712a6-e00a-41fe-860a-311e96030eaa",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=\nANALYZE THE TEXT BELOW AND FILL IN THIS SCHEMA:\nTarget audience: [describe who this content is aimed at]\nContent_Poles: [select ONE: entertain, inspire, educate, convince]\nPerspective: [select ONE: Personal story, Expert Advice, General Advice]\nDomain: [provide 2 specific keyword suggestions for the main theme/topic]\nContent subj.: [one sentence description, max 10 words]\nCampaign: [shortest possible tl;dr title]\n\n<post-text>\n{{ $json.LinkedIn }}\n</post-text>",
        "hasOutputParser": true,
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -448,
        160
      ],
      "id": "a26e1552-f538-4c86-805d-734876e2ddff",
      "name": "process row"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1RoRFPCA2nacux7nIh381ErMIKPVYeg8m66bdq49khvo",
          "mode": "list",
          "cachedResultName": "Content_Calendar_DB",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1RoRFPCA2nacux7nIh381ErMIKPVYeg8m66bdq49khvo/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1RoRFPCA2nacux7nIh381ErMIKPVYeg8m66bdq49khvo/edit#gid=0"
        },
        "options": {}
      },
      "id": "c730633d-f777-44e8-aeea-6fcd7336f5ea",
      "name": "Read Excel",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4,
      "position": [
        -784,
        -112
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "O03W9YZyCWUacxnv",
          "name": "Google Sheets_FirstProject"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "8c9e5a3d-2f1b-4e6a-9c8d-7b5a4f3e2d1c",
              "leftValue": "={{ $json.LinkedIn }}",
              "rightValue": 0,
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "6951c22e-556d-4084-b98e-7a23ae598e4d",
      "name": "format validation",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -624,
        160
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "186b90da-f161-4f4d-8d94-ac9502f6429b",
              "leftValue": "={{ $json.row_number }}",
              "rightValue": 6,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            },
            {
              "id": "c41503c0-a340-4617-a615-68b957975fa3",
              "leftValue": "={{ $json.row_number }}",
              "rightValue": 9,
              "operator": {
                "type": "number",
                "operation": "lt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -944,
        80
      ],
      "id": "2095acd5-8f19-4ffe-aefa-14428374da5a",
      "name": "P1"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "id": "91a8c50f-82e0-481c-8993-24a9b05d054d",
      "name": "Loop1",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -784,
        80
      ]
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"target_audience\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"description\": \"Description of who this content is aimed at\"\n\t\t},\n\t\t\"content_poles\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"enum\": [\"entertain\", \"inspire\", \"educate\", \"convince\"],\n\t\t\t\"description\": \"Primary purpose/pole of the content\"\n\t\t},\n\t\t\"perspective\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"enum\": [\"Personal story\", \"Expert Advice\", \"General Advice\"],\n\t\t\t\"description\": \"The viewpoint or approach used in the content\"\n\t\t},\n\t\t\"domain\": {\n\t\t\t\"type\": \"array\",\n\t\t\t\"items\": {\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t\"description\": \"Two specific keyword suggestions for the main theme/topic\",\n\t\t\t\"minItems\": 2,\n\t\t\t\"maxItems\": 2\n\t\t},\n\t\t\"content_subject\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"maxLength\": 60,\n\t\t\t\"description\": \"One sentence description, maximum 10 words\"\n\t\t},\n\t\t\"campaign\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"maxLength\": 30,\n\t\t\t\"description\": \"Shortest possible tl;dr title, even shorter than content subject\"\n\t\t}\n\t},\n\t\"required\": [\n\t\t\"target_audience\",\n\t\t\"content_poles\",\n\t\t\"perspective\",\n\t\t\"domain\",\n\t\t\"content_subject\",\n\t\t\"campaign\"\n\t]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -256,
        256
      ],
      "id": "7f324199-b67a-4b06-b149-34b5ad00765f",
      "name": "SO1"
    },
    {
      "parameters": {
        "model": "meta-llama/llama-4-scout-17b-16e-instruct",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        -336,
        256
      ],
      "id": "71345d2f-37f1-44e2-8855-48d7c4dd6e98",
      "name": "LLM1",
      "credentials": {
        "groqApi": {
          "id": "sue07pcKIgrn1xhP",
          "name": "Groq account"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -912,
        -112
      ],
      "id": "ee52000f-bc26-47eb-8fcd-ac2dd826147a",
      "name": "Trigger1"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1RoRFPCA2nacux7nIh381ErMIKPVYeg8m66bdq49khvo",
          "mode": "list",
          "cachedResultName": "Content_Calendar_DB",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1RoRFPCA2nacux7nIh381ErMIKPVYeg8m66bdq49khvo/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1RoRFPCA2nacux7nIh381ErMIKPVYeg8m66bdq49khvo/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Campaign": "={{$now}}",
            "row_number": "={{ $('format validation').item.json.row_number }}",
            "Content Subject": "={{ $json.output.content_subject }}",
            "Perspective": "={{ $json.output.perspective }}",
            "Target Audience": "={{ $json.output.target_audience }}",
            "Content_Pole": "={{ $json.output.content_poles }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "active",
              "displayName": "active",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Campaign",
              "displayName": "Campaign",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Content Subject",
              "displayName": "Content Subject",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Target Audience",
              "displayName": "Target Audience",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Content_Pole",
              "displayName": "Content_Pole",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Perspective",
              "displayName": "Perspective",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Platforms",
              "displayName": "Platforms",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "\"LEN(A1)\"",
              "displayName": "\"LEN(A1)\"",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "LinkedIn",
              "displayName": "LinkedIn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Publish Date",
              "displayName": "Publish Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Repost (Y/n)",
              "displayName": "Repost (Y/n)",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Link_to_Post",
              "displayName": "Link_to_Post",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "core_idea",
              "displayName": "core_idea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "sub_ideas",
              "displayName": "sub_ideas",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "contrasting_ideas",
              "displayName": "contrasting_ideas",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "supporting_examples",
              "displayName": "supporting_examples",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "proposed_resolutions",
              "displayName": "proposed_resolutions",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "overall_tone",
              "displayName": "overall_tone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "LinkedIn to repost",
              "displayName": "LinkedIn to repost",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "key_sections",
              "displayName": "key_sections",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "draft_outline",
              "displayName": "draft_outline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "refined_query",
              "displayName": "refined_query",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "messy_notes",
              "displayName": "messy_notes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Engagement rate",
              "displayName": "Engagement rate",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "X",
              "displayName": "X",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Blog",
              "displayName": "Blog",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Image prompt",
              "displayName": "Image prompt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "e89400e1-cc82-4f52-8d5f-adce8935c258",
      "name": "Write_Excel",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4,
      "position": [
        -160,
        160
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "O03W9YZyCWUacxnv",
          "name": "Google Sheets_FirstProject"
        }
      }
    },
    {
      "parameters": {
        "content": "looping \nover items",
        "height": 240,
        "width": 422,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -464,
        96
      ],
      "typeVersion": 1,
      "id": "9c1a77ad-c498-4519-9155-ea3b19349320",
      "name": "Sticky Note"
    }
  ],
  "connections": {
    "process row": {
      "main": [
        [
          {
            "node": "Write_Excel",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read Excel": {
      "main": [
        [
          {
            "node": "P1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "format validation": {
      "main": [
        [
          {
            "node": "process row",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "P1": {
      "main": [
        [
          {
            "node": "Loop1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop1": {
      "main": [
        [
          {
            "node": "Processing Complete",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "format validation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SO1": {
      "ai_outputParser": [
        [
          {
            "node": "process row",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "LLM1": {
      "ai_languageModel": [
        [
          {
            "node": "process row",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Trigger1": {
      "main": [
        [
          {
            "node": "Read Excel",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Write_Excel": {
      "main": [
        [
          {
            "node": "Loop1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "09a80676641fdc883fcaa67648f06322bebbd00adb281b1cf481107091bcc026"
  }
}
